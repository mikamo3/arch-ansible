---
# GNOME desktop environment installation

- name: Install GNOME minimal desktop environment
  aur:
    name:
      # Core GNOME packages (minimal = gnome group)
      - gnome                   # GNOME desktop environment meta-package
      - gnome-tweaks           # GNOME customization tool
      
      # X11 compatibility for legacy applications
      - xorg-xwayland          # X11 compatibility layer for Wayland
      
    state: present
  become_user: "{{ ansible_user }}"
  when: 
    - gui.desktop.install | default(false)
    - gui.desktop.gnome_install | default("minimal") == "minimal"

- name: Install GNOME full desktop environment
  aur:
    name:
      # Core GNOME packages (full meta-package)
      - gnome                    # GNOME desktop environment meta-package
      - gnome-extra             # Additional GNOME applications
      - gnome-tweaks            # GNOME customization tool
      - dconf-editor            # Configuration editor
      
      # X11 compatibility for legacy applications
      - xorg-xwayland           # X11 compatibility layer for Wayland
      
      # GNOME-specific utilities
      - gnome-browser-connector  # Browser extension integration
      - extension-manager       # GNOME Shell extension manager
      
      # GNOME applications (beyond gnome meta-package)
      - gnome-text-editor       # New GNOME text editor
      - gnome-console          # New GNOME terminal
      
    state: present
  become_user: "{{ ansible_user }}"
  when: 
    - gui.desktop.install | default(false)
    - gui.desktop.gnome_install | default("minimal") == "full"